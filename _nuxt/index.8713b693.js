import{_ as Z}from"./InputOutline.vue.604c4fb5.js";import{c as z,f as E,h as G,d as L,_ as j,F as H}from"./index.esm.722f2a4d.js";import{_ as J}from"./SelectOutline.vue.e738bfff.js";import{_ as K}from"./TextareaOutline.vue.48bd22d1.js";import{_ as Q}from"./PhoneInputOutline.vue.93aa1c2f.js";import{_ as W}from"./TextPortalPrimary.3e576166.js";import{_ as X,j as F,f as M,d as O}from"./entry.4c93b34e.js";import{M as u,N as c,O as n,a1 as ee,x as R,l as x,a as w,Y as k,u as o,I as l,a2 as y,_ as C,Z as U}from"./swiper-vue.c8ff5059.js";import{_ as ae}from"./InputOutlinePassword.vue.de01dba0.js";import{b as oe}from"./AlertTextDanger.7a9765a0.js";import{u as N}from"./useApi.d9afede1.js";import{_ as se}from"./ProfilePage.vue.e36f133f.js";import{u as le}from"./useTitle.d0884377.js";import{u as ne}from"./useMultiLang.cfc8eec5.js";import"./cn.a642df04.js";import"./index.77f53ec6.js";import"./ButtonPrimary.vue.fa16c569.js";import"./nuxt-link.53900735.js";import"./ButtonTextOpacity.vue.34272549.js";import"./ButtonText.vue.cc929151.js";import"./ShowPassword.457848ee.js";import"./nuxt-icon.e39c2bf3.js";import"./HiddenPassword.2b37ea02.js";import"./ButtonOpacity.41cbfdfc.js";import"./ArrowDown.45d074de.js";import"./Icon.1f372b90.js";import"./tw-merge.b91610f5.js";import"./ui.config.36b5640e.js";import"./index.6adfbe46.js";import"./micro-task.c25884c8.js";import"./open-closed.a9f432d0.js";import"./use-resolve-button-type.3ce7c18b.js";import"./disposables.ebd53c76.js";const te={};function re(D,b){const g=W;return u(),c(g,{class:"!text-[#319F43]"},{default:n(()=>[ee(D.$slots,"default")]),_:3})}const Y=X(te,[["render",re]]),pe=z().shape({old_password:E().required("password_required").trim().min(6,"password_length_min").max(22,"password_length_max"),newPassword:E().required("password_required").trim().min(6,"password_length_min").max(22,"password_length_max"),newConfPassword:E().oneOf([G("newPassword")],"password_match").required("password_confirmation")}),de={class:"mt-[30px] flex flex-col gap-y-[15px] sm:gap-x-[50px] md:mt-[35px] md:gap-x-[84px] md:gap-y-[20px] xl:mt-[55px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},me={class:"col-span-2 flex justify-center"},ie=R({__name:"ProfileChangePassword",setup(D){const b=F(),{t:g}=M(),p=x(()=>b.isPassword),m=w(""),f=w(""),_=w(!1),e=w({oldPassword:"",newPassword:"",newConfPassword:""}),h=w(!1),T=()=>{h.value=!0},q=()=>{_.value=!0,f.value="",m.value="",N(`${O()}/user/password/change`,{method:"POST",body:{old_password:e.value.oldPassword,new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}}).then(a=>{if(a.status===1)return f.value=g("password_successfully_changed"),e.value.oldPassword="",e.value.newPassword="",e.value.newConfPassword="",h.value=!1,_.value=!1,!1;if(a.status===0)return m.value=g("the_old_password_is_wrong"),!1})},I=()=>{_.value=!0,N(`${O()}/user/password/set`,{method:"POST",body:{new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}}).then(()=>{_.value=!1})},A=()=>{if(p)return q(),!1;I()};return(a,s)=>{const d=ae,t=L,v=oe,P=Y,$=j,V=H;return u(),c(V,{action:"#","validation-schema":"validationChangePassword"in a?a.validationChangePassword:o(pe),onInvalidSubmit:T,onSubmit:A},{default:n(()=>[k("div",de,[o(p)?(u(),c(t,{key:0,class:"row-span-1",label:a.$t("password_change.old_password")+":"},{default:n(()=>[l(d,{modelValue:o(e).oldPassword,"onUpdate:modelValue":s[0]||(s[0]=i=>o(e).oldPassword=i),placeholder:a.$t("placeholders.password_hide"),showPasswordError:o(h),name:"old_password"},null,8,["modelValue","placeholder","showPasswordError"])]),_:1},8,["label"])):y("",!0),l(t,{class:"row-span-1",label:(o(p)?a.$t("password_change.new_password"):a.$t("password"))+":"},{default:n(()=>[l(d,{modelValue:o(e).newPassword,"onUpdate:modelValue":s[1]||(s[1]=i=>o(e).newPassword=i),placeholder:a.$t("placeholders.password_hide"),showPasswordError:o(h),name:"newPassword"},null,8,["modelValue","placeholder","showPasswordError"])]),_:1},8,["label"]),l(t,{class:"row-span-1",label:a.$t("repeatPassword")+":"},{default:n(()=>[l(d,{modelValue:o(e).newConfPassword,"onUpdate:modelValue":s[2]||(s[2]=i=>o(e).newConfPassword=i),placeholder:a.$t("placeholders.password_hide"),showPasswordError:o(h),name:"newConfPassword"},null,8,["modelValue","placeholder","showPasswordError"])]),_:1},8,["label"]),o(m)?(u(),c(v,{key:1},{default:n(()=>[C(U(o(m)),1)]),_:1})):y("",!0),o(f)?(u(),c(P,{key:2},{default:n(()=>[C(U(o(f)),1)]),_:1})):y("",!0),k("div",me,[l($,{loading:o(_),type:"submit",class:"w-fit"},{default:n(()=>[C(U(o(p)?a.$t("change_password"):a.$t("password_change.set_password")),1)]),_:1},8,["loading"])])])]),_:1},8,["validation-schema"])}}}),ue={class:"max-w-[1190px]"},ce={class:"grid grid-cols-1 gap-y-[15px] sm:grid-cols-2 sm:gap-x-[50px] md:gap-x-[84px] md:gap-y-[20px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},Ge=R({__name:"index",setup(D){const b=F(),{t:g}=M();le("profile.personal_data");const p=x(()=>b.user),m=x(()=>b.isCompany),f=w(""),_=w(!1),e=w({name:"",lastName:"",phone:"",email:"",companyTitle:"",companyCategory:"",companyDescription:""}),h=w([]),T=x(()=>h.value.map(a=>({id:a.id,title:ne(a,"title")}))),q=x(()=>{const a=T.value.find(s=>s.id===+e.value.companyCategory);return a==null?void 0:a.title}),I=()=>{var a,s,d,t,v,P,$,V,i,S;if(e.value.name=((a=p.value)==null?void 0:a.name)||"",e.value.phone=((s=p.value)==null?void 0:s.phone)||"",e.value.lastName=((d=p.value)==null?void 0:d.last_name)||"",e.value.email=((t=p.value)==null?void 0:t.email)||"",e.value.companyTitle=((P=(v=p.value)==null?void 0:v.company)==null?void 0:P.title)||"",e.value.companyDescription=((V=($=p.value)==null?void 0:$.company)==null?void 0:V.description)||"",e.value.companyCategory=String((S=(i=p.value)==null?void 0:i.company)==null?void 0:S.category_id)||"",!m.value)return!1;N(`${O()}/category/parents`).then(B=>{h.value=B})},A=()=>{_.value=!0;const a={name:e.value.name,last_name:e.value.lastName,phone:e.value.phone,email:e.value.email};m.value&&Object.assign(a,{company_title:e.value.companyTitle,company_category:e.value.companyCategory,company_description:e.value.companyDescription}),N(`${O()}/user/changeInfo`,{method:"POST",body:a}).then(s=>{s.status===1&&(f.value=g("profile.the_data_has_been_updated"),_.value=!1)})};return I(),(a,s)=>{const d=Z,t=L,v=J,P=K,$=Q,V=Y,i=j,S=ie,B=se;return u(),c(B,{title:a.$t("profile.personal_data")},{default:n(()=>[k("div",ue,[k("div",ce,[l(t,{label:a.$t("name")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[l(d,{modelValue:o(e).name,"onUpdate:modelValue":s[0]||(s[0]=r=>o(e).name=r),placeholder:a.$t("placeholders.name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(m)?(u(),c(t,{key:0,label:a.$t("name_company")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[l(d,{modelValue:o(e).companyTitle,"onUpdate:modelValue":s[1]||(s[1]=r=>o(e).companyTitle=r),placeholder:a.$t("placeholders.name_company")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):y("",!0),l(t,{label:a.$t("last_name")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[l(d,{modelValue:o(e).lastName,"onUpdate:modelValue":s[2]||(s[2]=r=>o(e).lastName=r),placeholder:a.$t("placeholders.last_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(m)?(u(),c(t,{key:1,for:"",label:a.$t("category")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[l(v,{modelValue:o(e).companyCategory,"onUpdate:modelValue":s[3]||(s[3]=r=>o(e).companyCategory=r),placeholder:a.$t("placeholders.category"),currentValue:o(q),options:o(T),"value-attribute":"id","option-attribute":"title"},null,8,["modelValue","placeholder","currentValue","options"])]),_:1},8,["label"])):y("",!0),l(t,{label:a.$t("email")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[l(d,{modelValue:o(e).email,"onUpdate:modelValue":s[4]||(s[4]=r=>o(e).email=r),placeholder:a.$t("placeholders.email")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(m)?(u(),c(t,{key:2,label:a.$t("description_of_your_company")+":",class:"col-span-2 row-span-2 sm:col-span-1"},{default:n(()=>[l(P,{modelValue:o(e).companyDescription,"onUpdate:modelValue":s[5]||(s[5]=r=>o(e).companyDescription=r),placeholder:a.$t("placeholders.description_company"),class:"!h-[90px] md:!h-[119px] xl:!h-[152px]"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):y("",!0),l(t,{label:a.$t("phone_number")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[l($,{modelValue:o(e).phone,"onUpdate:modelValue":s[6]||(s[6]=r=>o(e).phone=r),placeholder:a.$t("placeholders.phone_number")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),o(f)?(u(),c(V,{key:3,class:"col-span-2"},{default:n(()=>[C(U(o(f)),1)]),_:1})):y("",!0),l(i,{loading:o(_),class:"col-span-2 w-fit justify-self-center",onClick:A},{default:n(()=>[C(U(a.$t("save_changes")),1)]),_:1},8,["loading"]),l(S)])])]),_:1},8,["title"])}}});export{Ge as default};
