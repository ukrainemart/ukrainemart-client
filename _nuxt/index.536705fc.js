import{_ as Z}from"./InputOutline.vue.e68acffd.js";import{c as z,f as E,h as G,d as L,_ as j,F as H}from"./index.esm.bcc532d3.js";import{_ as J}from"./SelectOutline.vue.43c39d33.js";import{_ as K}from"./TextareaOutline.vue.c95a53de.js";import{_ as Q}from"./PhoneInputOutline.vue.b65cad57.js";import{_ as W}from"./TextPortalPrimary.119a79d4.js";import{_ as X,j as F,f as M,d as O}from"./entry.e5b52a8c.js";import{M as i,N as c,O as t,a1 as ee,x as R,l as b,a as w,Y as k,u as a,I as n,a2 as y,_ as C,Z as U}from"./swiper-vue.67144f5d.js";import{_ as ae}from"./InputOutlinePassword.vue.76cc750a.js";import{b as oe}from"./AlertTextDanger.97de0cac.js";import{u as N}from"./useApi.674778d5.js";import{_ as se}from"./ProfilePage.vue.8736dab9.js";import{u as ne}from"./useMultiLang.13d39768.js";import"./cn.a642df04.js";import"./index.101b1fe2.js";import"./ButtonPrimary.vue.3da1f691.js";import"./nuxt-link.d582eca9.js";import"./ButtonText.vue.5d8e7e3a.js";import"./ShowPassword.e1abbf0d.js";import"./nuxt-icon.b4334037.js";import"./HiddenPassword.5fdf2c5b.js";import"./ButtonOpacity.cf238558.js";import"./ArrowDown.dbf84870.js";import"./Icon.7b7c2fb4.js";import"./tw-merge.ed5ef1ca.js";import"./ui.config.0deaf6d3.js";import"./index.a74f4e4f.js";import"./micro-task.4a381607.js";import"./open-closed.89ccc2fd.js";import"./use-resolve-button-type.23e66368.js";import"./disposables.6e00b73e.js";const te={};function le(D,$){const v=W;return i(),c(v,{class:"!text-[#319F43]"},{default:t(()=>[ee(D.$slots,"default")]),_:3})}const Y=X(te,[["render",le]]),re=z().shape({old_password:E().required("password_required").trim().min(6,"password_length_min").max(22,"password_length_max"),newPassword:E().required("password_required").trim().min(6,"password_length_min").max(22,"password_length_max"),newConfPassword:E().oneOf([G("newPassword")],"password_match").required("password_confirmation")}),me={class:"mt-[30px] flex flex-col gap-y-[15px] sm:gap-x-[50px] md:mt-[35px] md:gap-x-[84px] md:gap-y-[20px] xl:mt-[55px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},pe={class:"col-span-2 flex justify-center"},de=R({__name:"ProfileChangePassword",setup(D){const $=F(),{t:v}=M(),m=b(()=>$.isPassword),d=w(""),f=w(""),_=w(!1),e=w({oldPassword:"",newPassword:"",newConfPassword:""}),g=w(!1),S=()=>{g.value=!0},q=()=>{_.value=!0,f.value="",d.value="",N(`${O()}/user/password/change`,{method:"POST",body:{old_password:e.value.oldPassword,new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}}).then(o=>{if(o.status===1)return f.value=v("password_successfully_changed"),e.value.oldPassword="",e.value.newPassword="",e.value.newConfPassword="",g.value=!1,_.value=!1,!1;if(o.status===0)return d.value=v("the_old_password_is_wrong"),!1})},I=()=>{_.value=!0,N(`${O()}/user/password/set`,{method:"POST",body:{new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}}).then(()=>{_.value=!1})},A=()=>{if(m)return q(),!1;I()};return(o,s)=>{const p=ae,l=L,P=oe,h=Y,x=j,V=H;return i(),c(V,{action:"#","validation-schema":"validationChangePassword"in o?o.validationChangePassword:a(re),onInvalidSubmit:S,onSubmit:A},{default:t(()=>[k("div",me,[a(m)?(i(),c(l,{key:0,class:"row-span-1",label:o.$t("password_change.old_password")+":"},{default:t(()=>[n(p,{modelValue:a(e).oldPassword,"onUpdate:modelValue":s[0]||(s[0]=u=>a(e).oldPassword=u),showPasswordError:a(g),name:"old_password"},null,8,["modelValue","showPasswordError"])]),_:1},8,["label"])):y("",!0),n(l,{class:"row-span-1",label:(a(m)?o.$t("password_change.new_password"):o.$t("password"))+":"},{default:t(()=>[n(p,{modelValue:a(e).newPassword,"onUpdate:modelValue":s[1]||(s[1]=u=>a(e).newPassword=u),showPasswordError:a(g),name:"newPassword"},null,8,["modelValue","showPasswordError"])]),_:1},8,["label"]),n(l,{class:"row-span-1",label:o.$t("repeatPassword")+":"},{default:t(()=>[n(p,{modelValue:a(e).newConfPassword,"onUpdate:modelValue":s[2]||(s[2]=u=>a(e).newConfPassword=u),showPasswordError:a(g),name:"newConfPassword"},null,8,["modelValue","showPasswordError"])]),_:1},8,["label"]),a(d)?(i(),c(P,{key:1},{default:t(()=>[C(U(a(d)),1)]),_:1})):y("",!0),a(f)?(i(),c(h,{key:2},{default:t(()=>[C(U(a(f)),1)]),_:1})):y("",!0),k("div",pe,[n(x,{loading:a(_),type:"submit",class:"w-fit"},{default:t(()=>[C(U(a(m)?o.$t("change_password"):o.$t("password_change.set_password")),1)]),_:1},8,["loading"])])])]),_:1},8,["validation-schema"])}}}),ue={class:"max-w-[1190px]"},ie={class:"grid grid-cols-1 gap-y-[15px] sm:grid-cols-2 sm:gap-x-[50px] md:gap-x-[84px] md:gap-y-[20px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},Ye=R({__name:"index",setup(D){const $=F(),{t:v}=M(),m=b(()=>$.user),d=b(()=>$.isCompany),f=w(""),_=w(!1),e=w({name:"",lastName:"",phone:"",email:"",companyTitle:"",companyCategory:"",companyDescription:""}),g=w([]),S=b(()=>g.value.map(o=>({id:o.id,title:ne(o,"title")}))),q=b(()=>{const o=S.value.find(s=>s.id===+e.value.companyCategory);return o==null?void 0:o.title}),I=()=>{var o,s,p,l,P,h,x,V,u,T;if(e.value.name=((o=m.value)==null?void 0:o.name)||"",e.value.phone=((s=m.value)==null?void 0:s.phone)||"",e.value.lastName=((p=m.value)==null?void 0:p.last_name)||"",e.value.email=((l=m.value)==null?void 0:l.email)||"",e.value.companyTitle=((h=(P=m.value)==null?void 0:P.company)==null?void 0:h.title)||"",e.value.companyDescription=((V=(x=m.value)==null?void 0:x.company)==null?void 0:V.description)||"",e.value.companyCategory=String((T=(u=m.value)==null?void 0:u.company)==null?void 0:T.category_id)||"",!d.value)return!1;N(`${O()}/category/parents`).then(B=>{g.value=B})},A=()=>{_.value=!0;const o={name:e.value.name,last_name:e.value.lastName,phone:e.value.phone,email:e.value.email};d.value&&Object.assign(o,{company_title:e.value.companyTitle,company_category:e.value.companyCategory,company_description:e.value.companyDescription}),N(`${O()}/user/changeInfo`,{method:"POST",body:o}).then(s=>{s.status===1&&(f.value=v("profile.the_data_has_been_updated"),_.value=!1)})};return I(),(o,s)=>{const p=Z,l=L,P=J,h=K,x=Q,V=Y,u=j,T=de,B=se;return i(),c(B,{title:o.$t("profile.personal_data")},{default:t(()=>[k("div",ue,[k("div",ie,[n(l,{label:o.$t("name")+":",class:"col-span-2 sm:col-span-1"},{default:t(()=>[n(p,{modelValue:a(e).name,"onUpdate:modelValue":s[0]||(s[0]=r=>a(e).name=r)},null,8,["modelValue"])]),_:1},8,["label"]),a(d)?(i(),c(l,{key:0,label:o.$t("name_company")+":",class:"col-span-2 sm:col-span-1"},{default:t(()=>[n(p,{modelValue:a(e).companyTitle,"onUpdate:modelValue":s[1]||(s[1]=r=>a(e).companyTitle=r)},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),n(l,{label:o.$t("last_name")+":",class:"col-span-2 sm:col-span-1"},{default:t(()=>[n(p,{modelValue:a(e).lastName,"onUpdate:modelValue":s[2]||(s[2]=r=>a(e).lastName=r)},null,8,["modelValue"])]),_:1},8,["label"]),a(d)?(i(),c(l,{key:1,for:"",label:o.$t("category")+":",class:"col-span-2 sm:col-span-1"},{default:t(()=>[n(P,{modelValue:a(e).companyCategory,"onUpdate:modelValue":s[3]||(s[3]=r=>a(e).companyCategory=r),currentValue:a(q),options:a(S),"value-attribute":"id","option-attribute":"title"},null,8,["modelValue","currentValue","options"])]),_:1},8,["label"])):y("",!0),n(l,{label:o.$t("email")+":",class:"col-span-2 sm:col-span-1"},{default:t(()=>[n(p,{modelValue:a(e).email,"onUpdate:modelValue":s[4]||(s[4]=r=>a(e).email=r)},null,8,["modelValue"])]),_:1},8,["label"]),a(d)?(i(),c(l,{key:2,label:o.$t("description_of_your_company")+":",class:"col-span-2 row-span-2 sm:col-span-1"},{default:t(()=>[n(h,{modelValue:a(e).companyDescription,"onUpdate:modelValue":s[5]||(s[5]=r=>a(e).companyDescription=r),class:"!h-[90px] md:!h-[119px] xl:!h-[152px]"},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),n(l,{label:o.$t("phone_number")+":",class:"col-span-2 sm:col-span-1"},{default:t(()=>[n(x,{modelValue:a(e).phone,"onUpdate:modelValue":s[6]||(s[6]=r=>a(e).phone=r)},null,8,["modelValue"])]),_:1},8,["label"]),a(f)?(i(),c(V,{key:3,class:"col-span-2"},{default:t(()=>[C(U(a(f)),1)]),_:1})):y("",!0),n(u,{loading:a(_),class:"col-span-2 w-fit justify-self-center",onClick:A},{default:t(()=>[C(U(o.$t("save_changes")),1)]),_:1},8,["loading"]),n(T)])])]),_:1},8,["title"])}}});export{Ye as default};
