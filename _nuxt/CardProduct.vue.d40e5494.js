import D from"./Hearth.739b44ba.js";import O from"./HearthBg.7a7dd30d.js";import{_ as U,g as X,d as h,c as g}from"./entry.418ab3a2.js";import{M as a,X as _,a as Y,x as Z,l as T,N as x,O as q,Y as s,u as o,aj as G,a4 as V,Z as d,_ as I,I as j,a2 as y}from"./swiper-vue.aabf7ec7.js";import{_ as J}from"./nuxt-link.d90343f1.js";import{i as K}from"./isLoggedIn.ff2fa116.js";import{u as m}from"./useMultiLang.b329251b.js";import{c as E}from"./cn.a642df04.js";const Q={};function R(i,e){return a(),_("span",null,"â‚´")}const W=U(Q,[["render",R]]),tt=X("favoritesStore",()=>{const i=Y([]);function e(){h(`${g()}/user/favorite/list`,{transform(r){return Array.isArray(r)?r.map(n=>n.product):[]}}).then(r=>{i.value=r.data.value,console.log(i.value)})}function l(r){h(`${g()}/user/favorite/add/${r}`).then(n=>{n.data.value.status===1&&e()})}function v(r){h(`${g()}/user/favorite/destroy/${r}`).then(n=>{n.data.value.status===1&&e()})}return e(),{favorites:i,fetchFavorites:e,addToFavorites:l,removeFavorites:v}}),et={class:"relative mb-[7px] pt-[128%] md:mb-2.5 md:pt-[127.5%] 4xl:mb-5 4xl:pt-[125%]"},ot=["src","alt"],rt=["onClick"],st={class:"mb-[5px] truncate text-[13px] font-medium leading-[15px] md:text-[16px] md:leading-[20px] 4xl:mb-2.5 4xl:text-[20px] 4xl:leading-[24px]"},nt={key:0},at={key:0,class:"flex flex-col"},it={class:"price_amount"},ut={class:"price_cost"},ct={key:1},pt={class:"price_amount"},lt={class:"price_cost"},yt=Z({__name:"CardProduct",props:{product:{},isFavorites:{type:Boolean}},setup(i){const e=i,l=tt(),v=()=>{l.addToFavorites(e.product.id)},r=T(()=>!!l.favorites.find(t=>t.id===e.product.id)),n=()=>{l.removeFavorites(e.product.id)},H=()=>{if(!K())return!1;if(r.value)return n(),!1;v()},u=T(()=>{var t,f;return e.product&&e.product.price_type==="variated"?(f=(t=e.product)==null?void 0:t.prices)==null?void 0:f.map((c,p)=>({minAmount:p===0?c.min_amount:null,minPrice:p===0?c.price:null,maxAmount:p===e.product.prices.length-1?c.max_amount:null,maxPrice:p===e.product.prices.length-1?c.price:null})):[]});return(t,f)=>{const c=D,p=O,b=W,z=J;return a(),x(z,{to:`/product/${t.product.id}`,class:"group relative block rounded-[10px] bg-white p-2.5 md:rounded-[15px] md:p-[15px] 4xl:rounded-[20px] 4xl:p-[20px]"},{default:q(()=>{var k,$,F,C,L,M,w,A,B,P,N,S;return[s("div",et,[s("img",{class:"absolute left-0 top-0 h-full w-full rounded-[7px] object-cover",src:($=(k=t.product)==null?void 0:k.main_image)==null?void 0:$.path,alt:("useMultiLang"in t?t.useMultiLang:o(m))(t.product,"title")},null,8,ot)]),s("button",{class:"group/favorites absolute right-[15%] top-[7%] w-[22%] rounded-[50%] bg-white pt-[22%] duration-hover group-hover:opacity-100 is-hover:opacity-0",onClick:G(H,["prevent"])},[o(r)?(a(),x(p,{key:1,class:V(("cn"in t?t.cn:o(E))("absolute left-[50%] top-[50%] !h-[46%] !w-[46%] translate-x-[-50%] translate-y-[-40%] text-status_red duration-hover group-hover:text-status_red"))},null,8,["class"])):(a(),x(c,{key:0,class:V(("cn"in t?t.cn:o(E))("absolute left-[50%] top-[50%] !h-[46%] !w-[46%] translate-x-[-50%] translate-y-[-40%] text-black duration-hover group-hover/favorites:text-status_red"))},null,8,["class"]))],8,rt),s("h5",st,d(("useMultiLang"in t?t.useMultiLang:o(m))(t.product,"title")),1),t.product.prices?(a(),_("div",nt,[((F=t.product)==null?void 0:F.price_type)==="fixed"?(a(),_("div",at,[s("span",it,d(`${(L=(C=t.product)==null?void 0:C.prices[0])==null?void 0:L.min_amount} ${("useMultiLang"in t?t.useMultiLang:o(m))(t.product.prices[0].unit,"title")}`),1),s("span",ut,[I(d((w=(M=t.product)==null?void 0:M.prices[0])==null?void 0:w.price),1),j(b)])])):y("",!0),((A=t.product)==null?void 0:A.price_type)==="variated"?(a(),_("div",ct,[s("div",pt,d(`${(B=o(u)[0])==null?void 0:B.minAmount}-${(P=o(u)[o(u).length-1])==null?void 0:P.maxAmount} ${("useMultiLang"in t?t.useMultiLang:o(m))(t.product.prices[0].unit,"title")}`),1),s("div",lt,[I(d(`${(N=o(u)[0])==null?void 0:N.minPrice}-${(S=o(u)[o(u).length-1])==null?void 0:S.maxPrice}`)+" ",1),j(b)])])):y("",!0)])):y("",!0)]}),_:1},8,["to"])}}});export{yt as _,tt as u};
