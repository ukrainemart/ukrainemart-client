import D from"./Hearth.73022afe.js";import O from"./HearthBg.0478c763.js";import{_ as U,g as X,e as f,c as h}from"./entry.00e8b85d.js";import{M as a,X as m,a as Y,x as Z,l as S,N as x,O as q,Y as s,u as r,aj as G,a4 as T,Z as d,_ as V,I as j,a3 as g}from"./swiper-vue.01371f92.js";import{_ as J}from"./nuxt-link.a330a4b3.js";import{u as E}from"./useMultiLang.96420b6a.js";import{c as H}from"./cn.a642df04.js";const K={};function Q(i,e){return a(),m("span",null,"â‚´")}const R=U(K,[["render",Q]]),W=X("favoritesStore",()=>{const i=Y([]);function e(){f(`${h()}/user/favorite/list`,{transform(o){return Array.isArray(o)?o.map(n=>n.product):[]}}).then(o=>{i.value=o.data.value,console.log(i.value)})}function l(o){f(`${h()}/user/favorite/add/${o}`).then(n=>{n.data.value.status===1&&e()})}function _(o){f(`${h()}/user/favorite/destroy/${o}`).then(n=>{n.data.value.status===1&&e()})}return e(),{favorites:i,fetchFavorites:e,addToFavorites:l,removeFavorites:_}}),tt={class:"relative mb-[7px] pt-[128%] md:mb-2.5 md:pt-[127.5%] 4xl:mb-5 4xl:pt-[125%]"},et=["src","alt"],ot=["onClick"],rt={class:"mb-[5px] truncate text-[13px] font-medium leading-[15px] md:text-[16px] md:leading-[20px] 4xl:mb-2.5 4xl:text-[20px] 4xl:leading-[24px]"},st={key:0},nt={key:0,class:"flex flex-col"},at={class:"price_amount"},it={class:"price_cost"},ct={key:1},ut={class:"price_amount"},pt={class:"price_cost"},xt=Z({__name:"CardProduct",props:{product:{},isFavorites:{type:Boolean}},setup(i){const e=i,l=W(),_=()=>{l.addToFavorites(e.product.id)},o=S(()=>!!l.favorites.find(t=>t.id===e.product.id)),n=()=>{l.removeFavorites(e.product.id)},I=()=>{if(o.value)return n(),!1;_()},c=S(()=>{var t,v;return e.product&&e.product.price_type==="variated"?(v=(t=e.product)==null?void 0:t.prices)==null?void 0:v.map((u,p)=>({minAmount:p===0?u.min_amount:null,minPrice:p===0?u.price:null,maxAmount:p===e.product.prices.length-1?u.max_amount:null,maxPrice:p===e.product.prices.length-1?u.price:null})):[]});return(t,v)=>{const u=D,p=O,y=R,z=J;return a(),x(z,{to:`/product/${t.product.id}`,class:"group relative block rounded-[10px] bg-white p-2.5 md:rounded-[15px] md:p-[15px] 4xl:rounded-[20px] 4xl:p-[20px]"},{default:q(()=>{var b,k,F,C,$,w,A,B,M,P,L,N;return[s("div",tt,[s("img",{class:"absolute left-0 top-0 h-full w-full rounded-[7px] object-cover",src:(k=(b=t.product)==null?void 0:b.main_image)==null?void 0:k.path,alt:("useMultiLang"in t?t.useMultiLang:r(E))(t.product,"title")},null,8,et)]),s("button",{class:"group/favorites absolute right-[15%] top-[7%] w-[22%] rounded-[50%] bg-white pt-[22%] duration-hover group-hover:opacity-100 is-hover:opacity-0",onClick:G(I,["prevent"])},[r(o)?(a(),x(p,{key:1,class:T(("cn"in t?t.cn:r(H))("absolute left-[50%] top-[50%] !h-[46%] !w-[46%] translate-x-[-50%] translate-y-[-40%] text-status_red duration-hover group-hover:text-status_red"))},null,8,["class"])):(a(),x(u,{key:0,class:T(("cn"in t?t.cn:r(H))("absolute left-[50%] top-[50%] !h-[46%] !w-[46%] translate-x-[-50%] translate-y-[-40%] text-black duration-hover group-hover/favorites:text-status_red"))},null,8,["class"]))],8,ot),s("h5",rt,d(("useMultiLang"in t?t.useMultiLang:r(E))(t.product,"title")),1),t.product.prices?(a(),m("div",st,[((F=t.product)==null?void 0:F.price_type)==="fixed"?(a(),m("div",nt,[s("span",at,d(($=(C=t.product)==null?void 0:C.prices[0])==null?void 0:$.min_amount),1),s("span",it,[V(d((A=(w=t.product)==null?void 0:w.prices[0])==null?void 0:A.price),1),j(y)])])):g("",!0),((B=t.product)==null?void 0:B.price_type)==="variated"?(a(),m("div",ct,[s("div",ut,d(`${(M=r(c)[0])==null?void 0:M.minAmount}-${(P=r(c)[r(c).length-1])==null?void 0:P.maxAmount}`),1),s("div",pt,[V(d(`${(L=r(c)[0])==null?void 0:L.minPrice}-${(N=r(c)[r(c).length-1])==null?void 0:N.maxPrice}`)+" ",1),j(y)])])):g("",!0)])):g("",!0)]}),_:1},8,["to"])}}});export{xt as _,W as u};
