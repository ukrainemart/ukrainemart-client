import{_ as Z}from"./InputOutline.vue.b9067def.js";import{c as z,e as B,g as G,_ as E,F as H}from"./index.esm.e92ec572.js";import{_ as J}from"./SelectOutline.vue.5d599d3a.js";import{_ as K}from"./TextareaOutline.vue.8f0284de.js";import{_ as Q}from"./PhoneInputOutline.vue.1c1f5edb.js";import{_ as R}from"./TextPortalPrimary.39319945.js";import{_ as W,h as F,f as L,c as T}from"./entry.318b82ee.js";import{M as u,N as c,O as n,a1 as X,x as j,l as $,a as f,Y as O,u as a,I as t,a2 as y,_ as b,Z as C}from"./swiper-vue.f46bfc32.js";import{_ as M}from"./ButtonPrimary.vue.f269fba4.js";import{_ as ee}from"./InputOutlinePassword.vue.0dbe6abf.js";import{b as ae}from"./AlertTextDanger.a31a6f8d.js";import{u as k}from"./useApi.19408c53.js";import{_ as oe}from"./ProfilePage.vue.d76a8350.js";import{u as se}from"./useMultiLang.d1e04f94.js";import"./cn.a642df04.js";import"./index.60551811.js";import"./ButtonText.vue.de0ba58c.js";import"./nuxt-link.97f40f84.js";import"./ShowPassword.6feba442.js";import"./nuxt-icon.d4c19f94.js";import"./HiddenPassword.319c04a1.js";import"./ButtonOpacity.7112efa7.js";import"./ArrowDown.13272eca.js";import"./Icon.3835ada9.js";import"./tw-merge.4fa64ded.js";import"./ui.config.10f325be.js";import"./index.f16d6b9a.js";import"./micro-task.e6324d92.js";import"./open-closed.aab629dd.js";import"./use-resolve-button-type.cdfcde6b.js";import"./disposables.2015928c.js";const te={};function ne(N,V){const g=R;return u(),c(g,{class:"!text-[#319F43]"},{default:n(()=>[X(N.$slots,"default")]),_:3})}const Y=W(te,[["render",ne]]),le=z().shape({old_password:B().required("password_required").trim().min(6,"password_length_min").max(22,"password_length_max"),newPassword:B().required("password_required").trim().min(6,"password_length_min").max(22,"password_length_max"),newConfPassword:B().oneOf([G("newPassword")],"password_match").required("password_confirmation")}),re={class:"mt-[30px] flex flex-col gap-y-[15px] sm:gap-x-[50px] md:mt-[35px] md:gap-x-[84px] md:gap-y-[20px] xl:mt-[55px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},me={class:"col-span-2 flex justify-center"},pe=j({__name:"ProfileChangePassword",setup(N){const V=F(),{t:g}=L(),m=$(()=>V.isPassword),d=f(""),_=f(""),e=f({oldPassword:"",newPassword:"",newConfPassword:""}),w=f(!1),U=()=>{w.value=!0},D=()=>{_.value="",d.value="",k(`${T()}/user/password/change`,{method:"POST",body:{old_password:e.value.oldPassword,new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}}).then(o=>{if(o.status===1)return _.value=g("password_successfully_changed"),e.value.oldPassword="",e.value.newPassword="",e.value.newConfPassword="",w.value=!1,!1;if(o.status===0)return d.value=g("the_old_password_is_wrong"),!1})},I=()=>{k(`${T()}/user/password/set`,{method:"POST",body:{new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}})},q=()=>{if(m)return D(),!1;I()};return(o,s)=>{const p=ee,l=E,v=ae,P=Y,h=M,x=H;return u(),c(x,{action:"#","validation-schema":"validationChangePassword"in o?o.validationChangePassword:a(le),onInvalidSubmit:U,onSubmit:q},{default:n(()=>[O("div",re,[a(m)?(u(),c(l,{key:0,class:"row-span-1",label:o.$t("password_change.old_password")+":"},{default:n(()=>[t(p,{modelValue:a(e).oldPassword,"onUpdate:modelValue":s[0]||(s[0]=i=>a(e).oldPassword=i),showPasswordError:a(w),name:"old_password"},null,8,["modelValue","showPasswordError"])]),_:1},8,["label"])):y("",!0),t(l,{class:"row-span-1",label:(a(m)?o.$t("password_change.new_password"):o.$t("password"))+":"},{default:n(()=>[t(p,{modelValue:a(e).newPassword,"onUpdate:modelValue":s[1]||(s[1]=i=>a(e).newPassword=i),showPasswordError:a(w),name:"newPassword"},null,8,["modelValue","showPasswordError"])]),_:1},8,["label"]),t(l,{class:"row-span-1",label:o.$t("repeatPassword")+":"},{default:n(()=>[t(p,{modelValue:a(e).newConfPassword,"onUpdate:modelValue":s[2]||(s[2]=i=>a(e).newConfPassword=i),showPasswordError:a(w),name:"newConfPassword"},null,8,["modelValue","showPasswordError"])]),_:1},8,["label"]),a(d)?(u(),c(v,{key:1},{default:n(()=>[b(C(a(d)),1)]),_:1})):y("",!0),a(_)?(u(),c(P,{key:2},{default:n(()=>[b(C(a(_)),1)]),_:1})):y("",!0),O("div",me,[t(h,{type:"submit",class:"w-fit"},{default:n(()=>[b(C(a(m)?o.$t("change_password"):o.$t("password_change.set_password")),1)]),_:1})])])]),_:1},8,["validation-schema"])}}}),de={class:"max-w-[1190px]"},ie={class:"grid grid-cols-1 gap-y-[15px] sm:grid-cols-2 sm:gap-x-[50px] md:gap-x-[84px] md:gap-y-[20px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},Ye=j({__name:"index",setup(N){const V=F(),{t:g}=L(),m=$(()=>V.user),d=$(()=>V.isCompany),_=f(""),e=f({name:"",lastName:"",phone:"",email:"",companyTitle:"",companyCategory:"",companyDescription:""}),w=f([]),U=$(()=>w.value.map(o=>({id:o.id,title:se(o,"title")}))),D=$(()=>{const o=U.value.find(s=>s.id===+e.value.companyCategory);return o==null?void 0:o.title}),I=()=>{var o,s,p,l,v,P,h,x,i,S;if(e.value.name=((o=m.value)==null?void 0:o.name)||"",e.value.phone=((s=m.value)==null?void 0:s.phone)||"",e.value.lastName=((p=m.value)==null?void 0:p.last_name)||"",e.value.email=((l=m.value)==null?void 0:l.email)||"",e.value.companyTitle=((P=(v=m.value)==null?void 0:v.company)==null?void 0:P.title)||"",e.value.companyDescription=((x=(h=m.value)==null?void 0:h.company)==null?void 0:x.description)||"",e.value.companyCategory=String((S=(i=m.value)==null?void 0:i.company)==null?void 0:S.category_id)||"",!d.value)return!1;k(`${T()}/category/parents`).then(A=>{w.value=A})},q=()=>{const o={name:e.value.name,last_name:e.value.lastName,phone:e.value.phone,email:e.value.email};d.value&&Object.assign(o,{company_title:e.value.companyTitle,company_category:e.value.companyCategory,company_description:e.value.companyDescription}),k(`${T()}/user/changeInfo`,{method:"POST",body:o}).then(s=>{s.status===1&&(_.value=g("profile.the_data_has_been_updated"))})};return I(),(o,s)=>{const p=Z,l=E,v=J,P=K,h=Q,x=Y,i=M,S=pe,A=oe;return u(),c(A,{title:o.$t("profile.personal_data")},{default:n(()=>[O("div",de,[O("div",ie,[t(l,{label:o.$t("name")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[t(p,{modelValue:a(e).name,"onUpdate:modelValue":s[0]||(s[0]=r=>a(e).name=r)},null,8,["modelValue"])]),_:1},8,["label"]),a(d)?(u(),c(l,{key:0,label:o.$t("name_company")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[t(p,{modelValue:a(e).companyTitle,"onUpdate:modelValue":s[1]||(s[1]=r=>a(e).companyTitle=r)},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(l,{label:o.$t("last_name")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[t(p,{modelValue:a(e).lastName,"onUpdate:modelValue":s[2]||(s[2]=r=>a(e).lastName=r)},null,8,["modelValue"])]),_:1},8,["label"]),a(d)?(u(),c(l,{key:1,for:"",label:o.$t("category")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[t(v,{modelValue:a(e).companyCategory,"onUpdate:modelValue":s[3]||(s[3]=r=>a(e).companyCategory=r),currentValue:a(D),options:a(U),"value-attribute":"id","option-attribute":"title"},null,8,["modelValue","currentValue","options"])]),_:1},8,["label"])):y("",!0),t(l,{label:o.$t("email")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[t(p,{modelValue:a(e).email,"onUpdate:modelValue":s[4]||(s[4]=r=>a(e).email=r)},null,8,["modelValue"])]),_:1},8,["label"]),a(d)?(u(),c(l,{key:2,label:o.$t("description_of_your_company")+":",class:"col-span-2 row-span-2 sm:col-span-1"},{default:n(()=>[t(P,{modelValue:a(e).companyDescription,"onUpdate:modelValue":s[5]||(s[5]=r=>a(e).companyDescription=r),class:"!h-[90px] md:!h-[119px] xl:!h-[152px]"},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(l,{label:o.$t("phone_number")+":",class:"col-span-2 sm:col-span-1"},{default:n(()=>[t(h,{modelValue:a(e).phone,"onUpdate:modelValue":s[6]||(s[6]=r=>a(e).phone=r)},null,8,["modelValue"])]),_:1},8,["label"]),a(_)?(u(),c(x,{key:3,class:"col-span-2"},{default:n(()=>[b(C(a(_)),1)]),_:1})):y("",!0),t(i,{class:"col-span-2 w-fit justify-self-center",onClick:q},{default:n(()=>[b(C(o.$t("save_changes")),1)]),_:1}),t(S)])])]),_:1},8,["title"])}}});export{Ye as default};
