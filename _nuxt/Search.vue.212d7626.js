import B from"./Search.ff497ded.js";import L from"./SearchMobileMenu.ad19fd97.js";import{u as R}from"./useApi.25ba2ecd.js";import{d as N,b as I}from"./entry.47cb1d8b.js";import{c as S}from"./cn.a642df04.js";import{e as U}from"./index.a747a02a.js";import{x as b,b as F,M as l,X as n,N as M,Y as c,a4 as v,u as p,H as w,a3 as k,I as u,O as y,Z as h,a2 as d,a as _,_ as $}from"./swiper-vue.6ff25394.js";import P from"./SearchLinkArrow.ec09973c.js";import{_ as z}from"./nuxt-link.7ca564fd.js";import{u as C}from"./useMultiLang.f3664185.js";import{o as E}from"./index.cfab472a.js";const j=["value","placeholder"],D=b({__name:"SearchInput",props:{searchValue:{},isSearchActive:{type:Boolean},isSearchModal:{type:Boolean}},emits:["updateSearchValue","updateProducts","updateCategories","updateSearchActive"],setup(f,{emit:i}){const x=f,r=i,e=async t=>{try{const o=await R(`${N()}/search/shortQuery?search=${t}`);r("updateProducts",o.products),r("updateCategories",o.categories),r("updateSearchActive",!0)}catch(o){console.error(o)}},m=U(t=>{const s=t.target.value;r("updateSearchValue",s),s.trim().length?e(s.trim()):r("updateSearchActive",!1)},400);return F(()=>x.isSearchActive,t=>{t===!1&&r("updateSearchValue","")}),(t,o)=>{const s=B,g=L;return l(),n("div",{class:v(("cn"in t?t.cn:p(S))("relative  border border-solid border-black",{"rounded-[50px]":!t.isSearchActive,"rounded-t-[15px]":t.isSearchActive,"bg-white":t.isSearchModal}))},[t.isSearchModal?(l(),M(g,{key:1,fontControlled:!1,class:"absolute right-[15px] top-1/2 !mb-0 h-[12px] w-[12px] -translate-y-1/2 cursor-text md:h-[17px] md:w-[17px] lg:h-5 lg:w-5"})):(l(),M(s,{key:0,fontControlled:!1,class:"absolute right-[15px] top-1/2 z-[-1] !mb-0 h-[12px] w-[12px] -translate-y-1/2 cursor-text text-status_gray md:h-[17px] md:w-[17px] lg:h-5 lg:w-5"})),c("input",{value:t.searchValue,type:"text",placeholder:t.$t("startYourSearch"),class:v(("cn"in t?t.cn:p(S))("relative w-full bg-transparent py-[9px] pl-[15px] pr-8 text-[12px] font-medium text-black outline-none placeholder:text-status_gray md:py-[12px] md:pl-[18px] md:pr-[36px] md:text-[14px] lg:py-[15px] lg:pl-[21px] lg:pr-10 lg:text-[17px]",{"placeholder:text-black":t.isSearchModal})),onInput:o[0]||(o[0]=a=>p(m)(a))},null,42,j)],2)}}}),O={key:0},Y=c("p",{class:"px_search mb-[6px] font-namu text-[14px] leading-[17px] md:mb-[9px] md:text-[18px] md:leading-[22px] xl:mb-5 xl:text-[22px] xl:leading-[26px]"}," Категорії ",-1),H={class:"flex flex-col"},Q={class:"text-[10px] font-medium leading-[12px] md:text-[14px] md:leading-[17px] xl:text-[17px] xl:leading-[21px]"},T={key:1,class:"mx-[15px] mb-2.5 h-px bg-[#d9d9d9]"},X={key:2},Z=c("p",{class:"px_search mb-[6px] font-namu text-[14px] leading-[17px] md:mb-[9px] md:text-[18px] md:leading-[22px] xl:mb-5 xl:text-[22px] xl:leading-[26px]"}," Товари ",-1),q={class:"flex flex-col"},G={class:"text-[10px] font-medium leading-[12px] md:text-[14px] md:leading-[17px] xl:text-[17px] xl:leading-[21px]"},J={key:3,class:"px_search"},K=c("span",{class:"text-[10px] font-semibold leading-[12px] text-status_red md:text-[14px] md:leading-[17px] lg:hover:underline xl:text-[17px] xl:leading-[21px]"}," Показати всі результати ",-1),W={key:4},ee=c("p",{class:"px_search text-[10px] font-medium leading-[12px] md:text-[14px] md:leading-[17px] xl:text-[17px] xl:leading-[21px]"}," Нічого не знайдено ",-1),te=[ee],ae=b({__name:"SearchResult",props:{isSearchActive:{type:Boolean},products:{},categories:{},isSearchModal:{type:Boolean},toggleSearchModal:{type:Function}},setup(f){const i=f,x=I(),r=e=>{i.toggleSearchModal&&i.toggleSearchModal(),x.push(e)};return(e,m)=>{const t=P,o=z;return e.isSearchActive?(l(),n("div",{key:0,class:v(("cn"in e?e.cn:p(S))("absolute inset-x-0 z-10 rounded-b-[15px] bg-white py-[15px] text-left md:rounded-b-[20px] md:py-[18px] xl:py-[25px]",{relative:e.isSearchModal,"shadow-lg":!e.isSearchModal}))},[e.categories.length?(l(),n("div",O,[Y,c("ul",H,[(l(!0),n(w,null,k(e.categories,s=>(l(),n("li",{key:s.id,class:""},[u(o,{to:`/category/${s.id}`,class:"px_search flex items-center justify-between py-[8px] lg:hover:bg-gray-100 xl:py-[10px]",onClick:g=>r(`/category/${s.id}`)},{default:y(()=>[c("span",Q,h(("useMultiLang"in e?e.useMultiLang:p(C))(s,"title")),1),u(t,{fontControlled:!1,class:"h-[11px] w-[8px] md:h-[15px] md:w-[11px] xl:h-[18px] xl:w-[13px]"})]),_:2},1032,["to","onClick"])]))),128))])])):d("",!0),e.products.length&&e.categories.length?(l(),n("div",T)):d("",!0),e.products.length?(l(),n("div",X,[Z,c("ul",q,[(l(!0),n(w,null,k(e.products,s=>(l(),n("li",{key:s.id,class:""},[u(o,{to:`/product/${s.id}`,class:"px_search flex items-center justify-between py-[8px] lg:hover:bg-gray-100 xl:py-[10px]",onClick:g=>r(`product/${s.id}`)},{default:y(()=>[c("span",G,h(("useMultiLang"in e?e.useMultiLang:p(C))(s,"title")),1),u(t,{fontControlled:!1,class:"h-[11px] w-[8px] md:h-[15px] md:w-[11px] xl:h-[18px] xl:w-[13px]"})]),_:2},1032,["to","onClick"])]))),128))])])):d("",!0),e.products.length||e.categories.length?(l(),n("div",J,[u(o,{to:"/",class:"flex w-fit pt-[4px] xl:pt-[5px]"},{default:y(()=>[K]),_:1})])):d("",!0),!e.products.length&&!e.categories.length?(l(),n("div",W,te)):d("",!0)],2)):d("",!0)}}});const se={key:0,class:"ld:mt-[5px] ml-[18px] mt-[3px] text-left text-[7px] font-medium text-black md:mt-[7px] md:text-[13px] lg:text-[17px]"},oe={class:"underline"},le={class:"underline"},fe=b({__name:"Search",props:{isExample:{type:Boolean},isSearchModal:{type:Boolean},toggleSearchModal:{type:Function}},setup(f){const i=_(null),x=_(""),r=_(!1),e=_([]),m=_([]),t=a=>x.value=a,o=a=>r.value=a,s=a=>e.value=a,g=a=>m.value=a;return E(i,()=>o(!1)),(a,re)=>{const A=D,V=ae;return l(),n("div",{ref_key:"searchRef",ref:i,class:v(("cn"in a?a.cn:p(S))("relative",{"min-w-[305px] md:w-[446px] lg:w-[600px]":!a.isSearchModal,"max-w-[562px]":a.isSearchModal}))},[u(A,{searchValue:p(x),isSearchActive:p(r),isSearchModal:a.isSearchModal,onUpdateSearchValue:t,onUpdateProducts:s,onUpdateCategories:g,onUpdateSearchActive:o},null,8,["searchValue","isSearchActive","isSearchModal"]),u(V,{isSearchActive:p(r),products:p(e),categories:p(m),isSearchModal:a.isSearchModal,toggleSearchModal:a.toggleSearchModal},null,8,["isSearchActive","products","categories","isSearchModal","toggleSearchModal"]),a.isExample?(l(),n("p",se,[$(h(`${a.$t("example")}:`)+" ",1),c("span",oe,h(a.$t("grain")),1),$(" "+h(a.$t("or"))+" ",1),c("span",le,h(a.$t("oil")),1)])):d("",!0)],2)}}});export{fe as _};
