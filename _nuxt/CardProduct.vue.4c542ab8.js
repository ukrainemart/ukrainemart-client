import Y from"./Hearth.9619b8dc.js";import Z from"./HearthBg.b64dd3aa.js";import{_ as q,g as G,d as h,c as g}from"./entry.0431cddf.js";import{M as a,X as _,a as J,x as K,l as H,N as x,O as Q,Y as s,u as o,ak as R,a6 as j,Z as d,_ as z,I as D,a2 as y}from"./swiper-vue.4d67fcca.js";import{_ as W}from"./nuxt-link.3604d9a3.js";import{i as tt}from"./isLoggedIn.9c80ee20.js";import{u as m}from"./useMultiLang.4256af6e.js";import{c as O}from"./cn.a642df04.js";const et={};function ot(i,e){return a(),_("span",null,"â‚´")}const rt=q(et,[["render",ot]]),st=G("favoritesStore",()=>{const i=J([]);function e(){h(`${g()}/user/favorite/list`,{transform(r){return Array.isArray(r)?r.map(n=>n.product):[]}}).then(r=>{i.value=r.data.value,console.log(i.value)})}function l(r){h(`${g()}/user/favorite/add/${r}`).then(n=>{n.data.value.status===1&&e()})}function v(r){h(`${g()}/user/favorite/destroy/${r}`).then(n=>{n.data.value.status===1&&e()})}return e(),{favorites:i,fetchFavorites:e,addToFavorites:l,removeFavorites:v}}),nt={class:"relative mb-[7px] pt-[128%] md:mb-2.5 md:pt-[127.5%] 4xl:mb-5 4xl:pt-[125%]"},at=["src","alt"],it={class:"mb-[5px] truncate text-[13px] font-medium leading-[15px] md:text-[16px] md:leading-[20px] 4xl:mb-2.5 4xl:text-[20px] 4xl:leading-[24px]"},ut={key:0},ct={key:0,class:"flex flex-col"},pt={class:"price_amount"},lt={class:"price_cost"},dt={key:1},mt={class:"price_amount"},_t={class:"price_cost"},$t=K({__name:"CardProduct",props:{product:{},isFavorites:{type:Boolean}},setup(i){const e=i,l=st(),v=()=>{l.addToFavorites(e.product.id)},r=H(()=>!!l.favorites.find(t=>t.id===e.product.id)),n=()=>{l.removeFavorites(e.product.id)},U=()=>{if(!tt())return!1;if(r.value)return n(),!1;v()},u=H(()=>{var t,f;return e.product&&e.product.price_type==="variated"?(f=(t=e.product)==null?void 0:t.prices)==null?void 0:f.map((c,p)=>({minAmount:p===0?c.min_amount:null,minPrice:p===0?c.price:null,maxAmount:p===e.product.prices.length-1?c.max_amount:null,maxPrice:p===e.product.prices.length-1?c.price:null})):[]});return(t,f)=>{const c=Y,p=Z,b=rt,X=W;return a(),x(X,{to:`/product/${t.product.id}`,class:"group relative block rounded-[10px] bg-white p-2.5 md:rounded-[15px] md:p-[15px] 4xl:rounded-[20px] 4xl:p-[20px]"},{default:Q(()=>{var k,$,F,L,M,C,w,A,B,P,N,S,T,V,I,E;return[s("div",nt,[s("img",{class:"absolute left-0 top-0 h-full w-full rounded-[7px] object-cover",src:($=(k=t.product)==null?void 0:k.main_image)==null?void 0:$.path,alt:("useMultiLang"in t?t.useMultiLang:o(m))(t.product,"title")},null,8,at)]),s("button",{class:"group/favorites absolute right-[15%] top-[7%] w-[22%] rounded-[50%] bg-white pt-[22%] duration-hover group-hover:opacity-100 is-hover:opacity-0",onClick:R(U,["prevent"])},[o(r)?(a(),x(p,{key:1,class:j(("cn"in t?t.cn:o(O))("absolute left-[50%] top-[50%] !h-[46%] !w-[46%] translate-x-[-50%] translate-y-[-40%] text-status_red duration-hover group-hover:text-status_red"))},null,8,["class"])):(a(),x(c,{key:0,class:j(("cn"in t?t.cn:o(O))("absolute left-[50%] top-[50%] !h-[46%] !w-[46%] translate-x-[-50%] translate-y-[-40%] text-black duration-hover group-hover/favorites:text-status_red"))},null,8,["class"]))]),s("h5",it,d(("useMultiLang"in t?t.useMultiLang:o(m))(t.product,"title")),1),t.product.prices?(a(),_("div",ut,[((F=t.product)==null?void 0:F.price_type)==="fixed"?(a(),_("div",ct,[s("span",pt,d(`${(M=(L=t.product)==null?void 0:L.prices[0])==null?void 0:M.min_amount} ${("useMultiLang"in t?t.useMultiLang:o(m))((w=(C=t.product)==null?void 0:C.prices[0])==null?void 0:w.unit,"title")}`),1),s("span",lt,[z(d((B=(A=t.product)==null?void 0:A.prices[0])==null?void 0:B.price),1),D(b)])])):y("",!0),((P=t.product)==null?void 0:P.price_type)==="variated"?(a(),_("div",dt,[s("div",mt,d(`${(N=o(u)[0])==null?void 0:N.minAmount}-${(S=o(u)[o(u).length-1])==null?void 0:S.maxAmount} ${("useMultiLang"in t?t.useMultiLang:o(m))((V=(T=t.product)==null?void 0:T.prices[0])==null?void 0:V.unit,"title")}`),1),s("div",_t,[z(d(`${(I=o(u)[0])==null?void 0:I.minPrice}-${(E=o(u)[o(u).length-1])==null?void 0:E.maxPrice}`)+" ",1),D(b)])])):y("",!0)])):y("",!0)]}),_:1},8,["to"])}}});export{$t as _,st as u};
