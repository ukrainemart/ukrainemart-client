import{_ as L,a as X}from"./InputOutline.vue.6e797599.js";import{a as Y,_ as Z}from"./AlertTextDanger.be28c7e5.js";import{_ as z}from"./TextareaOutline.vue.9d243a38.js";import{_ as G}from"./PhoneInputOutline.vue.1610bcc9.js";import{_ as H}from"./TextPortalPrimary.e72c6749.js";import{_ as J,h as j,f as M,c as S}from"./entry.d32e97d9.js";import{M as i,N as _,O as l,a1 as K,x as q,l as V,a as P,X as Q,u as a,I as t,a3 as y,_ as $,Z as b,Y as I}from"./swiper-vue.01371f92.js";import{_ as E}from"./ButtonPrimary.vue.f5a7331c.js";import{_ as R}from"./InputOutlinePassword.vue.73c15706.js";import{u as N}from"./useApi.d03c7c65.js";import{_ as W}from"./ProfilePage.vue.36803324.js";import{u as ee}from"./useMultiLang.e78b4f8f.js";import"./index.44e48c92.js";import"./cn.a642df04.js";import"./SelectMenu.e3bde31f.js";import"./ArrowDown.690e9f4c.js";import"./nuxt-icon.506d9b02.js";import"./ButtonText.vue.65270844.js";import"./nuxt-link.4cd64146.js";import"./Icon.35e17094.js";import"./tw-merge.82e8ef7e.js";import"./ui.config.bf4fefce.js";import"./index.41f836bf.js";import"./usePopper.40a35113.js";import"./micro-task.1b13e225.js";import"./open-closed.b39cf687.js";import"./use-resolve-button-type.49b213cd.js";import"./disposables.8a1a5baa.js";import"./ShowPassword.8caf2dad.js";import"./HiddenPassword.d772b591.js";import"./ButtonOpacity.71a0657a.js";const ae={};function oe(D,x){const g=H;return i(),_(g,{class:"!text-[#319F43]"},{default:l(()=>[K(D.$slots,"default")]),_:3})}const F=J(ae,[["render",oe]]),se={class:"mt-[30px] flex flex-col gap-y-[15px] sm:gap-x-[50px] md:mt-[35px] md:gap-x-[84px] md:gap-y-[20px] xl:mt-[55px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},te={class:"col-span-2 flex justify-center"},le=q({__name:"ProfileChangePassword",setup(D){const x=j(),{t:g}=M(),r=V(()=>x.isPassword),u=P(""),f=P(""),e=P({oldPassword:"",newPassword:"",newConfPassword:""}),U=()=>{f.value="",u.value="",N(`${S()}/user/password/change`,{method:"POST",body:{old_password:e.value.oldPassword,new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}}).then(m=>{if(m.status===1)return f.value=g("password_successfully_changed"),e.value.oldPassword="",e.value.newPassword="",e.value.newConfPassword="",!1;if(m.status===0)return u.value=g("the_old_password_is_wrong"),!1})},h=()=>{N(`${S()}/user/password/set`,{method:"POST",body:{new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}})},B=()=>{if(r)return U(),!1;h()};return(m,w)=>{const o=R,s=L,c=Y,p=F,v=E;return i(),Q("div",se,[a(r)?(i(),_(s,{key:0,class:"row-span-1",label:m.$t("password_change.old_password")+":"},{default:l(()=>[t(o,{modelValue:a(e).oldPassword,"onUpdate:modelValue":w[0]||(w[0]=d=>a(e).oldPassword=d)},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(s,{class:"row-span-1",label:(a(r)?m.$t("password_change.new_password"):m.$t("password"))+":"},{default:l(()=>[t(o,{modelValue:a(e).newPassword,"onUpdate:modelValue":w[1]||(w[1]=d=>a(e).newPassword=d)},null,8,["modelValue"])]),_:1},8,["label"]),t(s,{class:"row-span-1",label:m.$t("repeatPassword")+":"},{default:l(()=>[t(o,{modelValue:a(e).newConfPassword,"onUpdate:modelValue":w[2]||(w[2]=d=>a(e).newConfPassword=d)},null,8,["modelValue"])]),_:1},8,["label"]),a(u)?(i(),_(c,{key:1},{default:l(()=>[$(b(a(u)),1)]),_:1})):y("",!0),a(f)?(i(),_(p,{key:2},{default:l(()=>[$(b(a(f)),1)]),_:1})):y("",!0),I("div",te,[t(v,{class:"w-fit",onClick:B},{default:l(()=>[$(b(a(r)?m.$t("change_password"):m.$t("password_change.set_password")),1)]),_:1})])])}}}),ne={class:"max-w-[1190px]"},re={class:"grid grid-cols-1 gap-y-[15px] sm:grid-cols-2 sm:gap-x-[50px] md:gap-x-[84px] md:gap-y-[20px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},Me=q({__name:"index",setup(D){const x=j(),{t:g}=M(),r=V(()=>x.user),u=V(()=>x.isCompany),f=P(""),e=P({name:"",lastName:"",phone:"",email:"",companyTitle:"",companyCategory:"",companyDescription:""}),U=P([]),h=V(()=>U.value.map(o=>({id:o.id,title:ee(o,"title")}))),B=V(()=>{const o=h.value.find(s=>s.id===+e.value.companyCategory);return o==null?void 0:o.title}),m=()=>{var o,s,c,p,v,d,C,T,k,O;if(e.value.name=((o=r.value)==null?void 0:o.name)||"",e.value.phone=((s=r.value)==null?void 0:s.phone)||"",e.value.lastName=((c=r.value)==null?void 0:c.last_name)||"",e.value.email=((p=r.value)==null?void 0:p.email)||"",e.value.companyTitle=((d=(v=r.value)==null?void 0:v.company)==null?void 0:d.title)||"",e.value.companyDescription=((T=(C=r.value)==null?void 0:C.company)==null?void 0:T.description)||"",e.value.companyCategory=String((O=(k=r.value)==null?void 0:k.company)==null?void 0:O.category_id)||"",!u.value)return!1;N(`${S()}/category/parents`).then(A=>{U.value=A})},w=()=>{const o={name:e.value.name,last_name:e.value.lastName,phone:e.value.phone,email:e.value.email};u.value&&Object.assign(o,{company_title:e.value.companyTitle,company_category:e.value.companyCategory,company_description:e.value.companyDescription}),N(`${S()}/user/changeInfo`,{method:"POST",body:o}).then(s=>{s.status===1&&(f.value=g("profile.the_data_has_been_updated"))})};return m(),(o,s)=>{const c=X,p=L,v=Z,d=z,C=G,T=F,k=E,O=le,A=W;return i(),_(A,{title:o.$t("profile.personal_data")},{default:l(()=>[I("div",ne,[I("div",re,[t(p,{label:o.$t("name")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(c,{modelValue:a(e).name,"onUpdate:modelValue":s[0]||(s[0]=n=>a(e).name=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(u)?(i(),_(p,{key:0,label:o.$t("name_company")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(c,{modelValue:a(e).companyTitle,"onUpdate:modelValue":s[1]||(s[1]=n=>a(e).companyTitle=n)},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(p,{label:o.$t("last_name")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(c,{modelValue:a(e).lastName,"onUpdate:modelValue":s[2]||(s[2]=n=>a(e).lastName=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(u)?(i(),_(p,{key:1,for:"",label:o.$t("category")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(v,{modelValue:a(e).companyCategory,"onUpdate:modelValue":s[3]||(s[3]=n=>a(e).companyCategory=n),currentValue:a(B),options:a(h),"value-attribute":"id","option-attribute":"title"},null,8,["modelValue","currentValue","options"])]),_:1},8,["label"])):y("",!0),t(p,{label:o.$t("email")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(c,{modelValue:a(e).email,"onUpdate:modelValue":s[4]||(s[4]=n=>a(e).email=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(u)?(i(),_(p,{key:2,label:o.$t("description_of_your_company")+":",class:"col-span-2 row-span-2 sm:col-span-1"},{default:l(()=>[t(d,{modelValue:a(e).companyDescription,"onUpdate:modelValue":s[5]||(s[5]=n=>a(e).companyDescription=n),class:"!h-[90px] md:!h-[119px] xl:!h-[152px]"},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(p,{label:o.$t("phone_number")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(C,{modelValue:a(e).phone,"onUpdate:modelValue":s[6]||(s[6]=n=>a(e).phone=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(f)?(i(),_(T,{key:3,class:"col-span-2"},{default:l(()=>[$(b(a(f)),1)]),_:1})):y("",!0),t(k,{class:"col-span-2 w-fit justify-self-center",onClick:w},{default:l(()=>[$(b(o.$t("save_changes")),1)]),_:1}),t(O)])])]),_:1},8,["title"])}}});export{Me as default};
