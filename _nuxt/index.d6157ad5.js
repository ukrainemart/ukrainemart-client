import{_ as X}from"./InputOutline.vue.8a3d92d0.js";import{_ as L}from"./useFormGroup.e0eb0836.js";import{a as Y,_ as Z}from"./AlertTextDanger.2871058e.js";import{_ as z}from"./TextareaOutline.vue.2b9b415c.js";import{_ as G}from"./PhoneInputOutline.vue.d60c32a7.js";import{_ as H}from"./TextPortalPrimary.8544e9cd.js";import{_ as J,h as j,f as M,c as S}from"./entry.1c78ecf8.js";import{M as d,N as _,O as l,a1 as K,x as q,l as V,a as P,X as Q,u as a,I as t,a2 as y,_ as $,Z as b,Y as I}from"./swiper-vue.aabf7ec7.js";import{_ as E}from"./ButtonPrimary.vue.bb4ccf13.js";import{_ as R}from"./InputOutlinePassword.vue.0238d79b.js";import{u as N}from"./useApi.dc0f8ead.js";import{_ as W}from"./ProfilePage.vue.522680b5.js";import{u as ee}from"./useMultiLang.4bfc9b35.js";import"./cn.a642df04.js";import"./index.28714f24.js";import"./SelectMenu.f0959a52.js";import"./ArrowDown.847b01c7.js";import"./nuxt-icon.057f591b.js";import"./ButtonText.vue.dd3c1950.js";import"./nuxt-link.c8e0820d.js";import"./Icon.d5fd9935.js";import"./tw-merge.94f63f7c.js";import"./ui.config.d79a8953.js";import"./index.54e3348d.js";import"./usePopper.74942890.js";import"./micro-task.525ba7d0.js";import"./open-closed.0816ab40.js";import"./use-resolve-button-type.1aa28d91.js";import"./disposables.bfda3bab.js";import"./ShowPassword.65868774.js";import"./HiddenPassword.ba4ba9d6.js";import"./ButtonOpacity.c5abfed0.js";const ae={};function oe(D,x){const g=H;return d(),_(g,{class:"!text-[#319F43]"},{default:l(()=>[K(D.$slots,"default")]),_:3})}const F=J(ae,[["render",oe]]),se={class:"mt-[30px] flex flex-col gap-y-[15px] sm:gap-x-[50px] md:mt-[35px] md:gap-x-[84px] md:gap-y-[20px] xl:mt-[55px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},te={class:"col-span-2 flex justify-center"},le=q({__name:"ProfileChangePassword",setup(D){const x=j(),{t:g}=M(),r=V(()=>x.isPassword),u=P(""),f=P(""),e=P({oldPassword:"",newPassword:"",newConfPassword:""}),U=()=>{f.value="",u.value="",N(`${S()}/user/password/change`,{method:"POST",body:{old_password:e.value.oldPassword,new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}}).then(m=>{if(m.status===1)return f.value=g("password_successfully_changed"),e.value.oldPassword="",e.value.newPassword="",e.value.newConfPassword="",!1;if(m.status===0)return u.value=g("the_old_password_is_wrong"),!1})},h=()=>{N(`${S()}/user/password/set`,{method:"POST",body:{new_password:e.value.newPassword,new_c_password:e.value.newConfPassword}})},B=()=>{if(r)return U(),!1;h()};return(m,w)=>{const o=R,s=L,c=Y,p=F,v=E;return d(),Q("div",se,[a(r)?(d(),_(s,{key:0,class:"row-span-1",label:m.$t("password_change.old_password")+":"},{default:l(()=>[t(o,{modelValue:a(e).oldPassword,"onUpdate:modelValue":w[0]||(w[0]=i=>a(e).oldPassword=i)},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(s,{class:"row-span-1",label:(a(r)?m.$t("password_change.new_password"):m.$t("password"))+":"},{default:l(()=>[t(o,{modelValue:a(e).newPassword,"onUpdate:modelValue":w[1]||(w[1]=i=>a(e).newPassword=i)},null,8,["modelValue"])]),_:1},8,["label"]),t(s,{class:"row-span-1",label:m.$t("repeatPassword")+":"},{default:l(()=>[t(o,{modelValue:a(e).newConfPassword,"onUpdate:modelValue":w[2]||(w[2]=i=>a(e).newConfPassword=i)},null,8,["modelValue"])]),_:1},8,["label"]),a(u)?(d(),_(c,{key:1},{default:l(()=>[$(b(a(u)),1)]),_:1})):y("",!0),a(f)?(d(),_(p,{key:2},{default:l(()=>[$(b(a(f)),1)]),_:1})):y("",!0),I("div",te,[t(v,{class:"w-fit",onClick:B},{default:l(()=>[$(b(a(r)?m.$t("change_password"):m.$t("password_change.set_password")),1)]),_:1})])])}}}),ne={class:"max-w-[1190px]"},re={class:"grid grid-cols-1 gap-y-[15px] sm:grid-cols-2 sm:gap-x-[50px] md:gap-x-[84px] md:gap-y-[20px] 2xl:gap-x-[150px] 2xl:gap-y-[25px]"},qe=q({__name:"index",setup(D){const x=j(),{t:g}=M(),r=V(()=>x.user),u=V(()=>x.isCompany),f=P(""),e=P({name:"",lastName:"",phone:"",email:"",companyTitle:"",companyCategory:"",companyDescription:""}),U=P([]),h=V(()=>U.value.map(o=>({id:o.id,title:ee(o,"title")}))),B=V(()=>{const o=h.value.find(s=>s.id===+e.value.companyCategory);return o==null?void 0:o.title}),m=()=>{var o,s,c,p,v,i,C,T,k,O;if(e.value.name=((o=r.value)==null?void 0:o.name)||"",e.value.phone=((s=r.value)==null?void 0:s.phone)||"",e.value.lastName=((c=r.value)==null?void 0:c.last_name)||"",e.value.email=((p=r.value)==null?void 0:p.email)||"",e.value.companyTitle=((i=(v=r.value)==null?void 0:v.company)==null?void 0:i.title)||"",e.value.companyDescription=((T=(C=r.value)==null?void 0:C.company)==null?void 0:T.description)||"",e.value.companyCategory=String((O=(k=r.value)==null?void 0:k.company)==null?void 0:O.category_id)||"",!u.value)return!1;N(`${S()}/category/parents`).then(A=>{U.value=A})},w=()=>{const o={name:e.value.name,last_name:e.value.lastName,phone:e.value.phone,email:e.value.email};u.value&&Object.assign(o,{company_title:e.value.companyTitle,company_category:e.value.companyCategory,company_description:e.value.companyDescription}),N(`${S()}/user/changeInfo`,{method:"POST",body:o}).then(s=>{s.status===1&&(f.value=g("profile.the_data_has_been_updated"))})};return m(),(o,s)=>{const c=X,p=L,v=Z,i=z,C=G,T=F,k=E,O=le,A=W;return d(),_(A,{title:o.$t("profile.personal_data")},{default:l(()=>[I("div",ne,[I("div",re,[t(p,{label:o.$t("name")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(c,{modelValue:a(e).name,"onUpdate:modelValue":s[0]||(s[0]=n=>a(e).name=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(u)?(d(),_(p,{key:0,label:o.$t("name_company")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(c,{modelValue:a(e).companyTitle,"onUpdate:modelValue":s[1]||(s[1]=n=>a(e).companyTitle=n)},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(p,{label:o.$t("last_name")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(c,{modelValue:a(e).lastName,"onUpdate:modelValue":s[2]||(s[2]=n=>a(e).lastName=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(u)?(d(),_(p,{key:1,for:"",label:o.$t("category")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(v,{modelValue:a(e).companyCategory,"onUpdate:modelValue":s[3]||(s[3]=n=>a(e).companyCategory=n),currentValue:a(B),options:a(h),"value-attribute":"id","option-attribute":"title"},null,8,["modelValue","currentValue","options"])]),_:1},8,["label"])):y("",!0),t(p,{label:o.$t("email")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(c,{modelValue:a(e).email,"onUpdate:modelValue":s[4]||(s[4]=n=>a(e).email=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(u)?(d(),_(p,{key:2,label:o.$t("description_of_your_company")+":",class:"col-span-2 row-span-2 sm:col-span-1"},{default:l(()=>[t(i,{modelValue:a(e).companyDescription,"onUpdate:modelValue":s[5]||(s[5]=n=>a(e).companyDescription=n),class:"!h-[90px] md:!h-[119px] xl:!h-[152px]"},null,8,["modelValue"])]),_:1},8,["label"])):y("",!0),t(p,{label:o.$t("phone_number")+":",class:"col-span-2 sm:col-span-1"},{default:l(()=>[t(C,{modelValue:a(e).phone,"onUpdate:modelValue":s[6]||(s[6]=n=>a(e).phone=n)},null,8,["modelValue"])]),_:1},8,["label"]),a(f)?(d(),_(T,{key:3,class:"col-span-2"},{default:l(()=>[$(b(a(f)),1)]),_:1})):y("",!0),t(k,{class:"col-span-2 w-fit justify-self-center",onClick:w},{default:l(()=>[$(b(o.$t("save_changes")),1)]),_:1}),t(O)])])]),_:1},8,["title"])}}});export{qe as default};
